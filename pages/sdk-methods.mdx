# Reclaim Class Documentation

The `Reclaim` class provides methods to verify and manage proofs creation and blockchain transformation for claims. It cannot be instantiated directly.

## Methods

### verifySignedProof(proof)

Verifies the authenticity and completeness of a given proof.

**Parameters:**
- `proof: Proof` (required) - The proof object to verify.

**Returns:**
- `Promise<boolean>` - Resolves to `true` if the proof is verified correctly, otherwise `false`.

**Example Usage:**

```javascript
// Verify a proof
const proof = {
  identifier: "abc123",
  claimData: { /* ... */ },
  signatures: ["sig1", "sig2"],
  witnesses: [{ id: "witness1", url: "https://witness1.com" }]
};

const isValid = await Reclaim.verifySignedProof(proof);
console.log(`Proof is valid: ${isValid}`);
```

```javascript
// Handle verification in a try-catch block
try {
  const isValid = await Reclaim.verifySignedProof(proof);
  if (isValid) {
    processVerifiedProof(proof);
  } else {
    handleInvalidProof(proof);
  }
} catch (error) {
  console.error("Error verifying proof:", error);
}
```

**Common Errors:**
- `InvalidProofError`: Thrown when the proof structure is invalid.
- `SignatureVerificationError`: Thrown when signature verification fails.

### transformForOnchain(proof)

Transforms proof data into a format suitable for on-chain transactions.

**Parameters:**
- `proof: Proof` (required) - The proof object to be transformed.

**Returns:**
- `onChainProof` - Contains `claimInfo` and `signedClaim` data, prepared for blockchain transactions.

**Example Usage:**

```javascript
// Transform a proof for on-chain use
const proof = { /* ... */ };
const onChainProof = Reclaim.transformForOnchain(proof);
console.log("On-chain proof:", onChainProof);
```

```javascript
// Use transformed proof in a smart contract interaction
const onChainProof = Reclaim.transformForOnchain(proof);
const contract = new ethers.Contract(address, abi, signer);
await contract.submitProof(onChainProof.claimInfo, onChainProof.signedClaim);
```

**Common Errors:**
- `TransformationError`: Thrown when the proof cannot be transformed correctly.

### verifyProvider(proof, providerHash)

Validates the provider used to generate the proof against the provided one.

**Parameters:**
- `proof: Proof` (required) - The received proof.
- `providerHash: string` (required) - Expected provider hash.

**Returns:**
- `boolean` - `true` if proof's provider matches the expected one, otherwise `false`.

**Example Usage:**

```javascript
// Verify provider for a proof
const proof = { /* ... */ };
const providerHash = "0x1234...";
const isValidProvider = Reclaim.verifyProvider(proof, providerHash);
console.log(`Provider is valid: ${isValidProvider}`);
```

```javascript
// Verify provider before processing a proof
if (Reclaim.verifyProvider(proof, expectedProviderHash)) {
  processProof(proof);
} else {
  console.error("Invalid provider for proof");
}
```

**Common Errors:**
- `ProviderMismatchError`: Thrown when the provider doesn't match the expected hash.

## Best Practices

1. Always verify proofs before processing them further.
2. Use try-catch blocks when calling asynchronous methods to handle potential errors gracefully.
3. Keep your application secret secure and never expose it in client-side code.
4. Regularly update your SDK to ensure you have the latest security features and improvements.

## Cross-References

- For more details on proof structure, see the [Proof Type](#proof-type) section.
- To understand how to set up callbacks, refer to the [Callback Setup Guide](/js/callback).

## Troubleshooting

1. **Proof Verification Fails**: Ensure that the proof structure is correct and all required fields are present.
2. **Provider Verification Issues**: Double-check that you're using the correct provider hash from your application dashboard.
3. **Transformation Errors**: Verify that the proof contains all necessary data before attempting to transform it for on-chain use.

## Proof Type

```typescript
interface Proof {
  identifier: string;
  claimData: ProviderClaimData;
  signatures: string[];
  witnesses: WitnessData[];
}

interface WitnessData {
  id: string;
  url: string;
}

interface ProviderClaimData {
  provider: string;
  parameters: string;
  owner: string;
  timestampS: number;
  context: string;
  identifier: string;
  epoch: number;
}
```

For more detailed information on specific methods or concepts, please refer to the relevant sections in this documentation.